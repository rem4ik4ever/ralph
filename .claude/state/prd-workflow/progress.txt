# Progress Log
PRD: prd-workflow
Started: 2026-01-16

## Codebase Patterns
- ESM imports require `.js` extension (e.g., `export * from './types.js'`)

---
<!-- Task logs below - APPEND ONLY -->

## Task - types-1
- Created PrdTask, PrdJson, PrdStatus interfaces
- Files: src/prd/types.ts, src/prd/index.ts
- **Learnings:** Need .js extension for ESM re-exports

## Task - templates-1
- Implemented template system: ensureTemplates(), loadTemplate(), substituteVars()
- Files: src/templates/templates.ts, src/templates/index.ts, src/__tests__/templates/templates.test.ts
- **Learnings:** getBundledTemplatesDir() uses import.meta.url for ESM compat

## Task - templates-2
- prd-md-to-json.md template already existed at templates/prd-md-to-json.md
- Template includes JSON schema, conversion rules, $PRD_PATH/$OUTPUT_PATH vars
- Instructs agent to output only JSON
- Files: templates/prd-md-to-json.md
- **Learnings:** Bundled templates live in templates/ dir (not src/templates/)

## Task - templates-3
- Created complete-next-task.md template
- Files: templates/complete-next-task.md
- Includes all process steps, variables ($PRD_NAME, $PRD_PATH, $CWD), and completion marker
- **Learnings:** Pre-existing test failures are unrelated to template work

## Task - manager-1
- Created PRD manager with CRUD operations
- Files: src/prd/manager.ts, src/prd/index.ts, src/__tests__/prd/manager.test.ts
- Functions: getPrdsDir, getPrdDir, prdExists, createPrdFolder, copyMarkdown, getPrd, listPrds
- All 12 unit tests pass
- **Learnings:** computeStatus helper computes pending/in_progress/completed from task.passes counts
